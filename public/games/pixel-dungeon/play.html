<!doctype html>
<html lang="nl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pixel Dungeon — speel direct</title>
    <style>
      :root{color-scheme:dark}
      body{margin:0;background:#0b0b0f;color:#f2f2f7;font-family:ui-sans-serif,system-ui}
      .wrap{max-width:1080px;margin:0 auto;padding:20px}
      .card{background:#101018;border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:16px}
      #game{margin-top:14px;min-height:680px;border-radius:12px;overflow:hidden;background:#000}
      .muted{opacity:.8}
      .btn{display:inline-block;margin-top:12px;padding:10px 12px;border:1px solid rgba(255,255,255,.2);border-radius:10px;color:inherit;text-decoration:none}
    </style>

    <script src="https://cjrtnc.leaningtech.com/4.0/loader.js"></script>
  </head>
  <body>
    <main class="wrap">
      <section class="card">
        <h1>Pixel Dungeon</h1>
        <p class="muted">Direct speelbaar vanaf je server. Even geduld bij de eerste start.</p>
        <a class="btn" href="/arcade">← Terug naar /arcade</a>
        <div id="game"></div>
      </section>
    </main>

    <script>
      (async () => {
        const gameRoot = document.getElementById("game");
        try {
          await cheerpjInit({
            enableInputMethods: true,
            clipboardMode: "system",
          });

          await cheerpjCreateDisplay(gameRoot, 960, 640);

          await cheerpjRunJar("desktop-1.7.2a-1.jar");
        } catch (error) {
          gameRoot.innerHTML = `
            <div style="padding:16px;border:1px solid rgba(255,90,90,.4);border-radius:10px;background:#1b0f14;">
              Starten van Pixel Dungeon mislukte.<br/>
              Controleer of <code>desktop-1.7.2a-1.jar</code> in <code>/public/games/pixel-dungeon/</code> staat.
            </div>
          `;
          console.error(error);
        }
      })();
    </script>
  </body>
</html>
